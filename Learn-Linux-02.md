## 第六章 Linux文件权限与目录配置


<!-- toc orderedList:0 depthFrom:1 depthTo:6 -->

- [第六章 Linux文件权限与目录配置](#第六章-linux文件权限与目录配置)
	- [6.1 使用者与群组](#61-使用者与群组)
	- [6.2 Linux 文件权限概念](#62-linux-文件权限概念)
		- [6.2.1 Linux文件属性](#621-linux文件属性)
		- [6.2.2 如何改变文件属性与权限](#622-如何改变文件属性与权限)
		- [6.2.3 Linux文件种类与扩展名](#623-linux文件种类与扩展名)
		- [6.2.4 Linux目录配置](#624-linux目录配置)
		- [6.2.5 目录树(directory tree)](#625-目录树directory-tree)
		- [6.2.6 绝对路径与相对路径](#626-绝对路径与相对路径)

<!-- tocstop -->


**多人多任务环境**

Linux一般将文件可存取的身份分为三个类别，分别是 owner/group/others，且三种身份各有 read/write/execute 等权限

### 6.1 使用者与群组

基本概念：
1. 文件拥有者
2. 群组
3. 其他人
4. root权限

### 6.2 Linux 文件权限概念

#### 6.2.1 Linux文件属性

>  ls -al

表示列出所有的文件详细的权限与属性 (包含隐藏档)

-rw-r--r--   1    root   root     5661   Sep  4 18:25 install.log.syslog

[   1  ][  2 ][   3  ][  4 ][  5  ][   6   ][  7   ]

[  权限  ][连结][拥有者][群组][文件容量][修改日期][文件名 ]


* 第一栏代表这个文件的**类型与权限(permission)**

第一个字符代表这个文件是『目录、文件或链接文件等等』：

```
[ d ]是目录
[ - ]是文件
[ l ]为连结档(link file)
[ b ]则表示为装置文件里面的可供储存的接口设备(可随机存取装置)
[ c ]则表示为装置文件里面的串行端口设备，例如键盘、鼠标(一次性读取装置)
```

接下来的字符中，以三个为一组，且均为 **rwx** 的三个参数的组合。其中，[ r ]代表可读(read)、[ w ]代表可写(write)、[ x ]代表可执行(execute)。 **注意，这三个权限的位置不会改变，如果没有权限，就会出现减号[ - ]**

```
第一组为文件拥有者的权限
第二组为同群组的权限
第三组为其他非本群组的权限
```

* 第二栏表示有多少档名连结到此节点(i-node) ???

* 第三栏表示这个文件(或目录)的『拥有者账号』

* 第四栏表示这个文件的所属群组

* 第五栏为这个文件的容量大小，默认单位为bytes

* 第六栏为这个文件的建档日期或者是最近的修改日期：

* 第七栏为这个文件的文件名

#### 6.2.2 如何改变文件属性与权限

**修改属性**

* chgrp ：改变文件所属群组
* chown ：改变文件拥有者


> \# chown [-R] 账号名称 文件或目录

选项与参数：
-R : 进行递归(recursive)的持续变更，亦即连同次目录下的所有文件都变更

chown可以改变文件所属群组：chown user：group filename
chown也能单纯的修改所属群组:chown .group filename

> \# cp 来源文件 目标文件

复制(cp)会**同时复制执行者的属性与权限**
即使你将文件拿给别的使用者了，那他仍然无法修改的(看属性/权限就知道了吧)， 所以你就必须要将这个文件的拥有者与群组修改一下

**修改权限**

* chmod ：改变文件的权限, SUID, SGID, SBIT等等的特性

**数字类型改变文件权限:**
* r:4
* w:2
* x:1

> \# chmod [-R] xyz 文件或目录

选项与参数：
* xyz : 数字类型的权限属性，为 rwx 属性数值的相加。
* -R : 进行递归(recursive)的持续变更，亦即连同次目录下的所有文件都会变更


**符号类型改变文件权限:**

u, g, o来代表三种身份:(1)user (2)group (3)others.此外， a 则代表 all 亦即全部的身份！那么读写的权限就可以写成r, w, x.

> \# chmod u=rwx,go=rx filename
注意喔！那个 u=rwx,go=rx 是连在一起的，中间并没有任何空格
\# chmod  a+w  .bashrc
所有人获得w权限
\# chmod  a-x  .bashrc
所有人去掉x权限

**注意**
文件的存取权限:
读权限（r）表示只允许指定用户读取相应文件的内容，而禁止对它做任何的更改操作。将所访问的文件的内容作为输入的命令都需要有读的权限。例如cat、more等。
写权限（w）表示允许指定用户打开并修改文件。例如命令vi、cp等。
执行权限（x）表示允许指定用户将该文件作为一个程序执行。

当你对一个文件具有w权限时，你可以具有写入/编辑/新增/修改文件的内容的权限， 但并不具备有删除该文件本身的权限！对于文件的rwx来说， 主要都是针对 **文件的内容** 而言，与文件名的存在与否没有关系

目录的存取权限:
读权限（r）:可以列出存储在该目录下的文件，即读目录内容列表。可以利用 ls 这个指令将该目录的内容列表显示出来
写权限（w）:
* 建立新的文件与目录；
* **删除已经存在的文件与目录(不论该文件的权限为何！)**
* 将已存在的文件或目录进行更名；
* 搬移该目录内的文件、目录位置。

**执行权限（x）:目录不可以被执行，目录的x代表的是用户能否进入该目录成为工作目录的用途,cd**

#### 6.2.3 Linux文件种类与扩展名

**任何装置在Linux底下都是文件**

**文件种类:**

1. 正规文件(regular file )
2. 目录(directory)
3. 连结档(link),就是类似Windows系统底下的快捷方式啦！ 第一个属性为 l ，例如 [lrwxrwxrwx]
4. 设备与装置文件(device)
5. 数据接口文件(sockets)
6. 数据输送文件(FIFO, pipe)

**Linux文件扩展名：**

.sh ： 脚本或批处理文件 (scripts)，因为批处理文件为使用shell写成的，所以扩展名就编成 .sh ；

.tar, .tar.gz, .zip, .tgz： 经过打包的压缩文件。这是因为压缩软件分别为 gunzip, tar 等等的，由于不同的压缩软件，而取其相关的扩展名啰！

.html, .php：网页相关文件

#### 6.2.4 Linux目录配置

* / (root, 根目录)：与开机系统有关；
* /usr (unix software resource)：与软件安装/执行有关；因为是所有系统默认的软件(distribution发布者提供的软件)都会放置到/usr底下，因此这个目录有点类似Windows 系统的『C:\\Windows\ + C:\\Program files\\』这两个目录的综合体
* /var (variable)：与系统运作过程有关,/var目录主要针对常态性变动的文件，包括缓存(cache)、登录档(log file)以及某些软件运作所产生的文件， 包括程序文件(lock file, run file)，或者例如MySQL数据库的文件等等

#### 6.2.5 目录树(directory tree)

![目录树架构示意图](http://cn.linux.vbird.org/linux_basic/0210filepermission_files/directory_tree.gif)

#### 6.2.6 绝对路径与相对路径

* 绝对路径：由根目录(/)开始写起的文件名或目录名称， 例如 /home/dmtsai/.bashrc；
* 相对路径：相对于目前路径的文件名写法。 例如 ./home/dmtsai 或 ../../home/dmtsai/ 等等。反正开头不是 / 就属于相对路径的写法

.  ：代表当前的目录，也可以使用 ./ 来表示；
.. ：代表上一层目录，也可以 ../ 来代表。
